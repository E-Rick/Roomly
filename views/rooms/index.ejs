<% layout('layouts/boilerplate') -%>

<section id="latest">
  <h3>Recently added</h3>
  <div class="row text-left">
    <% rooms.docs.forEach(function(room){ %>
    <div class="col-xl-3 col-lg-4 col-6 mb-4">
      <div class="card border-0">
        <div class="inner">
          <% if(room.images[0]) { %>
            <img src="<%= room.images[0].url %>" onError="this.onerror=null;this.src='/images/placeholder.jpg';" class="card-img-top thumbnails" alt="<%= room.name %>" />
          <% } else { %>
            <img src="/images/placeholder.jpg" class="card-img-top thumbnails" alt="<%= room.name %>">
          <% } %>
          <i class="far fa-heart fa-2x"></i>
          <div class="heart"></div>
          <i class="fas fa-heart fa-2x"></i>
        </div>
        <div class="card-body p-0 pt-2">
          <p class="room-type">Entire Home Â· 1 bed</p>
          <h5 class="card-title mb-1"><%= room.name %></h5>
          <p class="mb-0"><span class="price">$<%= room.price %></span><span class="room-type">/ Night</span></p>
          <% if (room.rating === 0) { %>
            <span class="fa fa-star fa-1x"></span>
            <span class="fa fa-star fa-1x"></span>
            <span class="fa fa-star fa-1x"></span>
            <span class="fa fa-star fa-1x"></span>
            <span class="fa fa-star fa-1x"></span>
          <% } else { %>
            <span class="fa fa-star fa-1x checked"></span>
            <span class="fa fa-star fa-1x <% if (room.rating > 1.5) { %> checked <% } %>"></span>
            <span class="fa fa-star fa-1x <% if (room.rating > 2.5) { %> checked <% } %>"></span>
            <span class="fa fa-star fa-1x <% if (room.rating > 3.5) { %> checked <% } %>"></span>
            <span class="fa fa-star fa-1x <% if (room.rating > 4.5) { %> checked <% } %>"></span>
          <% } %>
          <span>(<%= room.reviews.length %>)</span>
          <a href="/rooms/<%= room._id %>" class="stretched-link"></a>
        </div>
      </div>
    </div>
    <% });%>
  </div>
  <% include ../partials/paginateRooms %>
</section>